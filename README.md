# create-telegram-ai-agent

- Created at: 2025-04-10
- Created by: `üê¢ Arun Godwin Patel @ Code Creations`

## Table of contents

- [Setup](#setup)
  - [System](#system)
  - [Installation](#installation)
- [Walkthrough](#walkthrough)
  - [Tech stack](#tech-stack)
  - [Build Instructions](#build-instructions)
    - [1. Setup Telegram Bot](#1-setup-telegram-bot)
    - [2. Create n8n workflow](#2-create-n8n-workflow)
    - [3. Build AI Agent](#3-build-ai-agent)
    - [4. Structured Output Parser](#4-structured-output-parser)

## Setup

### Installation

1. Create an n8n account or use a locally deployed instance of n8n: [n8n setup](https://n8n.io/)
2. Create a Telegram account [Telegram](https://telegram.org/)

## Walkthrough

This tutorial will be using `n8n` as an orchestration layer to build a `Tools Agent` leveraging LLM APIs to manage a conversation with users through Telegram. There will not be any code snippets required to complete this build, but I have included all of the prompts for the AI nodes that you'll need to setup the workflow.

### Tech stack

**Orchestration**

- Automation: `n8n`

**AI**

- AI Agent: `n8n`
- LLM: `Claude`

**Messaging**

- Chat: `Telegram Bot`

### Build Instructions

To build this AI Agent for yourself, first you need to create an n8n account and create a workflow. You also need a Telegram account.

#### 1. Setup Telegram Bot

We need to create a new bot, the easiest way to do this is using the [BotFather](https://core.telegram.org/bots#botfather).

Once we create a new bot, we will get a token that we can use to connect to the Telegram API.

#### 2. Create n8n workflow

Create a new workflow in n8n and add the following nodes:

- `Telegram Trigger`: This node will be used to receive messages from the Telegram bot.
- `Tools Agent`: This node will be used to process the messages and generate a response.
- `Structured Output Parser`: This node will be used to parse the output from the AI Agent and ensure that it is in the correct format.
- `Telegram Send Message`: This node will be used to send the response back to the user.

#### 3. Build AI Agent

The AI Agent that we're building is a `Tools Agent`. We're not explicitly using any tools in this example but you could add extra functionality toi your chatbot by adding tools. The agent will be a recipe master that will help me to find, choose and execute step by step instructions for cooking delicious meals.

Here is the user prompt for the AI agent:

```
- Message: {{ $json.message.text }}
```

Here is the system prompt for the AI agent:

```
## ROLE
You are my recipe advisor that must give me great ideas for what I should make in the kitchen. You are capable of performing the following tasks (TASKS):
- Ideas for recipes [IDEAS]
- Summarised step by step instructions for making a recipe [STEPS]
- Dietary considerations for recipes [DIET]

## TASK
1. Process my current and previous messages
2. Decide which of TASKS I am asking for
3. If none of the TASKS are relevant, remind me of what you're capable of helping with
4. Create a text response back to me

# RULES
- You can only perform tasks within TASKS. If I ask for something outside of their scope, remind me what you can do and prompt me for something else.
- Keep responses clear and concise
- Use a funny tone of voice, as if you're an old friend
- ALWAYS format your response in the following valid JSON format. This JSON object must not be a value of a key. The only keys and values in the response are detailed here:
{
  "response": string
}

## DATA
- Today's date: {{ $now.format('DD') }}
```

#### 4. Structured Output Parser

This node is used to ensure that the output generated by the AI Agent is in the correct format. Here is the JSON schema:

```json
{
  "type": "object",
  "properties": {
    "response": {
      "type": "string"
    }
  },
  "required": ["response"]
}
```

This completes the setup of our Telegram AI Agent, now you can test it by speaking to it through Telegram!

## Happy building! üöÄ

```bash
üê¢ Arun Godwin Patel @ Code Creations
```
